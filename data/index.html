<!DOCTYPE html>
<!--suppress HtmlUnknownTarget -->
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biodom Mini</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Biodom Mini</h1>
            <div id="ws-status" class="status-indicator disconnected"></div>
        </header>

        <!-- Tab-Navigationsleiste -->
        <div class="tab-bar">
            <button class="tab-link active" data-tabname="Dashboard">Dashboard</button>
            <button class="tab-link" data-tabname="Settings">Einstellungen</button>
            <button class="tab-link" data-tabname="Camera">Kamera</button>
        </div>

        <!-- Inhalt f√ºr den "Dashboard"-Tab -->
        <div id="Dashboard" class="tab-content">
            <h2>Live-Status</h2>
            <div id="dashboard-grid" class="grid-container">

                <!-- Kachel: Raumklima -->
                <div class="card">
                    <div class="card-header">
                        <h3>Raumklima</h3>
                    </div>
                    <p>Temperatur: <span id="airTemp" class="value">--.-</span> ¬∞C</p>
                    <p>Feuchtigkeit: <span id="humidity" class="value">--</span> %</p>
                    <p class="status-line">
                        <img id="fanIcon" class="inline-icon" src="/icons/air_16x16.png" alt="fan">
                        L√ºfter:
                        <span id="fanOn" class="status-off">AUS</span>
                    </p>
                    <div class="mode-selector" id="mode-fan">
                        <input type="radio" id="fan-on" name="fan" value="on"><label for="fan-on">An</label>
                        <input type="radio" id="fan-off" name="fan" value="off"><label for="fan-off">Aus</label>
                        <input type="radio" id="fan-auto" name="fan" value="auto"><label for="fan-auto">Auto</label>
                    </div>
                </div>

                <!-- Kachel: Boden -->
                <div class="card">
                    <div class="card-header">
                        <h3>Boden</h3>
                    </div>
                    <p>Temperatur: <span id="soilTemp" class="value">--.-</span> ¬∞C</p>
                    <p>Feuchtigkeit: <span id="soilMoisture" class="value">--</span> %</p>
                    <p class="status-line">
                        <img id="heaterIcon" class="inline-icon" src="/icons/radiator_16x16.png" alt="heater">
                        Heizung:
                        <span id="heaterOn" class="status-off">AUS</span>
                    </p>
                    <div class="mode-selector" id="mode-heater">
                        <input type="radio" id="heater-on" name="heater" value="on"><label for="heater-on">An</label>
                        <input type="radio" id="heater-off" name="heater" value="off"><label for="heater-off">Aus</label>
                        <input type="radio" id="heater-auto" name="heater" value="auto"><label for="heater-auto">Auto</label>
                    </div>
                </div>

                <!-- Kachel: Beleuchtung -->
                <div class="card">
                    <div class="card-header">
                        <h3>Beleuchtung</h3>
                    </div>
                    <p>Tageslicht: <span id="lightLux" class="value">----</span> Lux</p>
                    <p class="status-line">
                        <img id="lamp1Icon" class="inline-icon" src="/icons/sun_16x16.png" alt="lamp1">
                        Lampe 1:
                        <span id="lamp1On" class="status-off">AUS</span>
                    </p>
                    <div class="mode-selector" id="mode-lamp1">
                        <input type="radio" id="lamp1-on" name="lamp1" value="on"><label for="lamp1-on">An</label>
                        <input type="radio" id="lamp1-off" name="lamp1" value="off"><label for="lamp1-off">Aus</label>
                        <input type="radio" id="lamp1-auto" name="lamp1" value="auto"><label for="lamp1-auto">Auto</label>
                    </div>
                    <p class="status-line">
                        <img id="lamp2Icon" class="inline-icon" src="/icons/sun_16x16.png" alt="lamp2">
                        Lampe 2:
                        <span id="lamp2On" class="status-off">AUS</span>
                    </p>
                    <div class="mode-selector" id="mode-lamp2">
                        <input type="radio" id="lamp2-on" name="lamp2" value="on"><label for="lamp2-on">An</label>
                        <input type="radio" id="lamp2-off" name="lamp2" value="off"><label for="lamp2-off">Aus</label>
                        <input type="radio" id="lamp2-auto" name="lamp2" value="auto"><label for="lamp2-auto">Auto</label>
                    </div>
                </div>

                <!-- Kachel: Wasser & Bew√§sserung -->
                <div class="card">
                    <div class="card-header">
                        <h3>Wasser</h3>
                    </div>
                    <p>Tank-F√ºllstand: <span id="waterLevelOk" class="water-level-empty">üëé</span></p>
                    <p class="status-line">
                        <img id="pumpIcon" class="inline-icon" src="/icons/rainy_weather_16x16.png" alt="pump">
                        Pumpe:
                        <span id="pumpOn" class="status-off">AUS</span>
                    </p>
                    <div class="mode-selector" id="mode-pump">
                        <input type="radio" id="pump-on" name="pump" value="on"><label for="pump-on">An</label>
                        <input type="radio" id="pump-off" name="pump" value="off"><label for="pump-off">Aus</label>
                        <input type="radio" id="pump-auto" name="pump" value="auto"><label for="pump-auto">Auto</label>
                    </div>
                    <p class="status-line">
                        <img id="misterIcon" class="inline-icon" src="/icons/dry_16x16.png" alt="mister">
                        Vernebler:
                        <span id="misterOn" class="status-off">AUS</span>
                    </p>
                    <div class="mode-selector" id="mode-mister">
                        <input type="radio" id="mister-on" name="mister" value="on"><label for="mister-on">An</label>
                        <input type="radio" id="mister-off" name="mister" value="off"><label for="mister-off">Aus</label>
                        <input type="radio" id="mister-auto" name="mister" value="auto"><label for="mister-auto">Auto</label>
                    </div>
                </div>

            </div>
        </div>

        <!-- Inhalt f√ºr den "Einstellungen"-Tab -->
        <div id="Settings" class="tab-content">
            <h2>Systemeinstellungen</h2>
            <form id="settingsForm" class="form-grid">
                <div class="form-group">
                    <label for="airTempThresholdHigh">Zielwert f√ºr Raumtemperatur in ¬∞C</label>
                    <input type="number" step="1" id="airTempThresholdHigh">
                </div>
                <div class="form-group">
                    <label for="humidityTarget">Zielwert Luftfeuchtigkeit in %</label>
                    <input type="number" step="1" id="humidityTarget">
                </div>
                <div class="form-group">
                    <label for="soilTempTarget">Zielwert f√ºr Bodentemperatur in ¬∞C</label>
                    <input type="number" step="1" id="soilTempTarget">
                </div>
                <div class="form-group">
                    <label for="soilMoistureTarget">Zielwert f√ºr Bodenfeuchte in %</label>
                    <input type="number" step="1" id="soilMoistureTarget">
                </div>

                <!-- Lampe 1 -->
                <div class="form-group">
                    <label for="light1OnHour">Lampe 1 an (ab Stunde)</label>
                    <input type="number" min="0" max="23" id="light1OnHour">
                </div>
                <div class="form-group">
                    <label for="light1OffHour">Lampe 1 aus (ab Stunde)</label>
                    <input type="number" min="0" max="23" id="light1OffHour">
                </div>
                <div class="form-group">
                    <label for="light1LuxThresholdDark">Lampe 1 EIN-Schwelle in Lux</label>
                    <input type="number" step="100" id="light1LuxThresholdDark">
                </div>
                <div class="form-group">
                    <label for="light1LuxThresholdBright">Lampe 1 AUS-Schwelle in Lux</label>
                    <input type="number" step="100" id="light1LuxThresholdBright">
                </div>

                <!-- Lampe 2 -->
                <div class="form-group">
                    <label for="light2OnHour">Lampe 2 an (ab Stunde)</label>
                    <input type="number" min="0" max="23" id="light2OnHour">
                </div>
                <div class="form-group">
                    <label for="light2OffHour">Lampe 2 aus (ab Stunde)</label>
                    <input type="number" min="0" max="23" id="light2OffHour">
                </div>
                <div class="form-group">
                    <label for="light2LuxThresholdDark">Lampe 2 EIN-Schwelle in Lux</label>
                    <input type="number" step="100" id="light2LuxThresholdDark">
                </div>
                <div class="form-group">
                    <label for="light2LuxThresholdBright">Lampe 2 AUS-Schwelle in Lux</label>
                    <input type="number" step="100" id="light2LuxThresholdBright">
                </div>

                <div class="form-group">
                    <label for="fanCooldownDurationMs">Laufzeit des L√ºfters in Sekunden</label>
                    <input type="number" step="1" id="fanCooldownDurationMs">
                </div>
                <div class="form-group">
                    <label for="wateringDurationMs">Dauer der Bew√§sserung in Sekunden</label>
                    <input type="number" step="1" id="wateringDurationMs">
                </div>
            </form>
            <button id="saveSettingsButton" class="action-button">Einstellungen Speichern</button>
            <div id="settings-status" class="status-message"></div>
        </div>

        <!-- Inhalt f√ºr den "Kamera"-Tab -->
        <div id="Camera" class="tab-content">
            <h2>Kameragalerie</h2>
            <div class="camera-controls">
                <button id="captureNowButton" class="action-button">Bild jetzt aufnehmen</button>
            </div>
            <!-- Haupt-Bildanzeige -->
            <div id="image-viewer">
                <div class="image-wrapper"> <!-- Wrapper hilft beim Zentrieren und der Gr√∂√üe -->
                    <img id="current-image" src="" alt="Kamerabild">
                </div>
                <p id="image-timestamp"></p>
                <!-- Player Controls -->
                <div class="player-controls">
                    <button id="btnPrev" class="player-btn" title="Vorheriges Bild">‚èÆ</button>
                    <button id="btnPlayPause" class="player-btn play-btn" title="Zeitraffer Start/Pause">‚ñ∂</button>
                    <button id="btnNext" class="player-btn" title="N√§chstes Bild">‚è≠</button>
                </div>
                <!-- Slider f√ºr Geschwindigkeit -->
                <div class="player-settings">
                     <label for="timelapseSpeed">Geschwindigkeit:</label>
                     <input type="range" id="timelapseSpeed" min="50" max="1000" value="500" step="50">
                     <span id="speedDisplay">500ms</span>
                </div>
            </div>
            <hr style="border-color: #3c3c3c; margin: 20px 0;">
            <!-- Dropdown und L√∂schen -->
            <div class="image-management">
                <div class="image-selector">
                    <label for="image-select">Bild ausw√§hlen:</label>
                    <select id="image-select"></select>
                </div>
                <button id="deleteImagesButton" class="action-button danger">Alle Bilder l√∂schen</button>
            </div>
        </div>

    </div>
    <script src="/script.js"></script>
</body>
</html>