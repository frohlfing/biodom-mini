<!DOCTYPE html>
<!--suppress HtmlUnknownTarget -->
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biodom Mini</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Biodom Mini</h1>
            <div id="ws-status" class="status-indicator disconnected"></div>
        </header>

        <!-- Tab-Navigationsleiste -->
        <div class="tab-bar">
            <button class="tab-link active" onclick="openTab(event, 'Dashboard')">Dashboard</button>
            <button class="tab-link" onclick="openTab(event, 'Controls')">Steuerung</button>
            <button class="tab-link" onclick="openTab(event, 'Settings')">Einstellungen</button>
            <button class="tab-link" onclick="openTab(event, 'Camera')">Kamera</button>
            <button class="tab-link" onclick="openTab(event, 'Files')">Dateimanager</button>
        </div>

        <!-- Inhalt für den "Dashboard"-Tab -->
        <div id="Dashboard" class="tab-content">
            <h2>Live-Status</h2>
            <div id="dashboard-grid" class="grid-container">

                <!-- Kachel: Raumklima -->
                <div class="card">
                    <div class="card-header">
                        <img id="iconAir" src="/icons/thermometer_16x16.png" class="icon">
                        <h3>Raumklima</h3>
                    </div>
                    <p>Temperatur: <span id="airTemp" class="value">--.-</span> °C</p>
                    <p>Feuchtigkeit: <span id="humidity" class="value">--</span> %</p>
                    <p>Lüfter: <span id="fanOn" class="status-off">AUS</span></p>
                </div>

                <!-- Kachel: Boden -->
                <div class="card">
                    <div class="card-header">
                        <img id="iconSoil" src="/icons/engine_coolant_16x16.png" class="icon">
                        <h3>Boden</h3>
                    </div>
                    <p>Temperatur: <span id="soilTemp" class="value">--.-</span> °C</p>
                    <p>Feuchtigkeit: <span id="soilMoisture" class="value">--</span> %</p>
                    <p>Heizung: <span id="heaterOn" class="status-off">AUS</span></p>
                </div>

                <!-- Kachel: Beleuchtung -->
                <div class="card">
                    <div class="card-header">
                        <img id="iconLight" src="/icons/sun_16x16.png" class="icon">
                        <h3>Beleuchtung</h3>
                    </div>
                    <p>Tageslicht: <span id="lightLux" class="value">----</span> Lux</p>
                    <p>Lampe 1: <span id="lamp1On" class="status-off">AUS</span></p>
                    <p>Lampe 2: <span id="lamp2On" class="status-off">AUS</span></p>
                </div>

                <!-- Kachel: Wasser & Bewässerung -->
                <div class="card">
                    <div class="card-header">
                        <img id="iconWater" src="/icons/watering_can_16x16.png" class="icon">
                        <h3>Wasser</h3>
                    </div>
                    <p>Tank-Füllstand: <span id="waterLevelOk" class="status-off">NIEDRIG</span></p>
                    <p>Pumpe: <span id="pumpOn" class="status-off">AUS</span></p>
                    <p>Vernebler: <span id="misterOn" class="status-off">AUS</span></p>
                </div>

            </div>
        </div>

        <!-- Inhalt für den "Steuerung"-Tab -->
        <div id="Controls" class="tab-content">
            <h2>Manuelle Aktor-Steuerung</h2>
            <p class="notice">Achtung: Manuelle Eingriffe überschreiben die Automatik, bis der nächste Regelzyklus stattfindet.</p>
            <div id="controls-grid" class="grid-container">

                <div class="control-card">
                    <h3>Lampen</h3>
                    <button class="action-button" onclick="sendCommand('toggle', 'lamp1')">Lampe 1 Umschalten</button>
                    <button class="action-button" onclick="sendCommand('toggle', 'lamp2')">Lampe 2 Umschalten</button>
                </div>

                <div class="control-card">
                    <h3>Klima</h3>
                    <button class="action-button" onclick="sendCommand('toggle', 'heater')">Heizung Umschalten</button>
                    <button class="action-button" onclick="sendCommand('toggle', 'fan')">Lüfter Umschalten</button>
                </div>

                <div class="control-card">
                    <h3>Wasser</h3>
                    <button class="action-button" onclick="sendCommand('toggle', 'pump')">Pumpe Umschalten</button>
                    <button class="action-button" onclick="sendCommand('toggle', 'mister')">Vernebler Umschalten</button>
                </div>

            </div>
        </div>

        <!-- Inhalt für den "Einstellungen"-Tab -->
        <div id="Settings" class="tab-content">
            <h2>Systemeinstellungen</h2>
            <form id="settingsForm" class="form-grid">
                <!-- Das Formular wird hier dynamisch per JS eingefügt -->
            </form>
            <button class="action-button" onclick="saveSettings()">Einstellungen Speichern</button>
            <div id="settings-status" class="status-message"></div>
        </div>

        <!-- Inhalt für den "Kamera"-Tab -->
        <div id="Camera" class="tab-content">
            <h2>Kameragalerie</h2>
            <div id="camera-gallery">
                <!-- Bildergalerie wird hier dynamisch per JS eingefügt -->
            </div>
        </div>

        <!-- Inhalt für den "Dateimanager"-Tab -->
        <div id="Files" class="tab-content">
            <h2>Dateimanager</h2>
            <div id="file-uploader">
                <h3>Webseiten-Dateien hochladen</h3>
                <input type="file" id="file-input" multiple>
                <button class="action-button" onclick="uploadFiles()">Hochladen</button>
                <progress id="upload-progress" value="0" max="100"></progress>
            </div>
            <div id="file-list">
                <!-- Dateiliste wird hier dynamisch per JS eingefügt -->
            </div>
        </div>

    </div>
    <script src="/script.js"></script>
</body>
</html>